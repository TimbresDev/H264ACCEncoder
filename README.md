# H264ACCEncoder
Pure Java H264.ACC Encoder to create frame-by-frame animation with given WAV file audio

## Requirements

### Story 
As a developer, I want to be able to use a pure Java encoder to create a movie frame-by-frame so I can generate video clips with sound for social media.

Given a WAV stream (e.g. reading from a remote file resource) and my Java code to create AWT images I want the encoder to create an input stream that I can broadcast or store as a file and that will represent a MP4 movie with H264 video and ACC audio encoding

### More Detail
When the H264ACCEncoder is implemented, then it should be possible to do the following:

1. Create a new instance of the H264ACCEncoder via default constructor
1. Specify an existing WAV input stream. The length of the WAV file defines the length of the output movie
1. Specify a movie resolution and framerate
1. Specify a callback FrameGenerator object that will be repeatedly called to generate the movie content frame-by-frame 
1. Initiate the encoding (synchronously)
1. Receive calls to the callback object for each frame added to the movie
1. At the end of the synchronous encoding receive an input stream as return parameter
1. The bytes of the input stream can be directly persisted to a file or passed on to remote processes for download.

### Valid Assumptions
* It can be assumed that the input WAV stream always has this format: 1 channel (mono), sample rate 44100kHz, 16bit PCM
* It can be assumed that the WAV input stream is valid and not null
* It can be assumed that the AWT BufferedImages produced by the callback FrameGenerator are ARGB 8-bit format
* It can be assumed that there is sufficient memory available to the JVM to buffer the complete content of the WAV input stream in memory
* It can be assumed that there is sufficient memory available to the JVM to buffer the complete content of the MP4 input stream in memory


## Acceptance Criteria
If all of these criteria are met, then the solution is accepted:

### Functionality
* Framerate input parameter must support 25 and 29.97 frames per second
* The input stream represents an encoded movie that can be directly written to a MP4 file and played back on standard players 
* The audio track of the movie corresponds to the WAV content specified as input
* Each frame of the movie is identical to the image represented by the BuffereImages generated by the callback, at the corresponding position defined by the "framePositionInAudioSamples" and "totalLengthInAudioSamples" parameters 
* Movie resolution (width, height) input parameter must support values 1280x720, 640x640 and 480x480
* Video output must be MP4 H264/ACC
* It must be possible to Tweet the output movie without the need for further modification. The movie must play on Twitter (sound and moving images) and must comply with the specification https://dev.twitter.com/rest/media/uploading-media#videorecs
* It must be possible to upload the output movie to YouTube without the need for further modification, the movie must play on YouTube (sound and moving images)
* The included JUnit test technology.timbres.H264ACCEncoder_Test passes.

### Design Constraints
* Pure Java (no JNI, no Runtime.exec, no binaries of any sort)
* No singletons, no static methods
* No dependency on environment variables or on operating system
* No usage of file system.

### Source
* Source code must be submitted to this repository https://github.com/TimbresDev/H264ACCEncoder
* Must be able to build and package via Maven
* Dependencies to public libraries are ok but must be defined in pom.xml and must be available via public repositories
* Dependencies must follow the same design constraints as above (test-phase excluded)
* No binary files must be part of the source (test data excluded)
* No license restriction, the source code belongs to the poster, the freelancer waives all legal rights and agrees to open source this encoder
* The freelancer may mark the source with his credits and the source may inlude a ReadMe that must be shipped with the encoder.

## Out of Scope
* Other WAV formats
* Other video output formats
* Maven deployment




